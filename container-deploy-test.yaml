kind: Secret
apiVersion: v1
metadata:
name: gitlab-pull-secret
namespace: pedemo-n1um-user0
type: kubernetes.io/dockerconfigjson
data:
---
apiVersion: apps/v1
kind: Deployment
metadata:
name: webby
namespace: pedemo-n1um-user0
spec:
replicas: 3
selector:
    matchLabels:
    app: webby
template:
    metadata:
    labels:
        app: webby
    spec:
    terminationGracePeriodSeconds: 10
    containers:
    - name: webby
        image: registry.gitlab.com/ignw1/dvs-code/pedemo/rhos-aws-pedemo/webby:v1.0
        imagePullPolicy: Always
        
        resources:
        requests:
            cpu: 100m
            memory: 64Mi
        limits:
            cpu: 200m
            memory: 128Mi
    imagePullSecrets:
        - name: gitlab-pull-secret
---
apiVersion: v1
kind: Service
metadata:
  name: webby-service
  namespace: pedemo-n1um-user0
spec:
  type: NodePort
  selector:
    app: webby
  ports:
    - port: 80
      targetPort: 9999
      nodePort: 31999
---
apiVersion: apps/v1
kind: Deployment
metadata:
name: condb
namespace: pedemo-n1um-user0
spec:
selector:
    matchLabels:
    app: condb
template:
    metadata:
    labels:
        app: condb
    spec:
    terminationGracePeriodSeconds: 10
    containers:
    - name: condb
        image: registry.gitlab.com/ignw1/dvs-code/pedemo/rhos-aws-pedemo/condb:v1.0
        imagePullPolicy: Always
        
        resources:
        requests:
            cpu: 200m
            memory: 128Mi
        limits:
            cpu: 400m
            memory: 256Mi
    imagePullSecrets:
        - name: gitlab-pull-secret
---
apiVersion: v1
kind: Service
metadata:
  name: condb-service
  namespace: pedemo-n1um-user0
spec:
  selector:
    app: condb
  ports:
    - port: 8888
      targetPort: 8888
